<div *ngIf="!apiPoints.getPointSuccess">
  <div
    *ngIf="!permissionDenied && !promptRegister"
    class="container d-flex flex-column justify-content-center"
  >
    <div class="container d-flex justify-content-center">
      <div
        [hidden]="!reading"
        class="border border-5 rounded w-100 w-md-25 h-md-25"
        id="reader"
      ></div>
    </div>
    <div class="container d-flex justify-content-center">
      <button
        id="bStart"
        type="button"
        title="start"
        class="btn btn-success"
        (click)="startReading()"
        *ngIf="!reading"
        [hidden]="cameraReady"
        [disabled]="cameraButtonDisable"
      >
        <svg
          width="200"
          height="200"
          fill="currentColor"
          class="bi bi-camera"
          viewBox="0 0 16 13"
          version="1.1"
          id="svg6"
          sodipodi:docname="camera.svg"
          inkscape:version="1.2.1 (9c6d41e410, 2022-07-14)"
          xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
          xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:svg="http://www.w3.org/2000/svg"
        >
          <defs id="defs10" />
          <path
            d="m 15,12 a 1,1 0 0 1 -1,1 H 2 A 1,1 0 0 1 1,12 V 6 A 1,1 0 0 1 2,5 H 3.172 A 3,3 0 0 0 5.292,4.121 L 6.122,3.293 A 1,1 0 0 1 6.827,3 h 2.344 a 1,1 0 0 1 0.707,0.293 l 0.828,0.828 A 3,3 0 0 0 12.828,5 H 14 a 1,1 0 0 1 1,1 z M 2,4 A 2,2 0 0 0 0,6 v 6 a 2,2 0 0 0 2,2 h 12 a 2,2 0 0 0 2,-2 V 6 A 2,2 0 0 0 14,4 H 12.828 A 2,2 0 0 1 11.414,3.414 L 10.586,2.586 A 2,2 0 0 0 9.172,2 H 6.828 A 2,2 0 0 0 5.414,2.586 L 4.586,3.414 A 2,2 0 0 1 3.172,4 Z"
            id="path2"
            transform="translate(0,-2)"
          />
          <path
            d="m 8,11 a 2.5,2.5 0 1 1 0,-5 2.5,2.5 0 0 1 0,5 z m 0,1 A 3.5,3.5 0 1 0 8,5 3.5,3.5 0 0 0 8,12 Z M 3,6.5 a 0.5,0.5 0 1 1 -1,0 0.5,0.5 0 0 1 1,0 z"
            id="path4"
            transform="translate(0,-2)"
          />
          <g
            id="g250"
            transform="matrix(0.02112598,0,0,0.02108592,5.9292593,4.2693085)"
          >
            <path
              d="M 105.572,101.811 C 115.461,95.443 132.989,85.347 133.678,59.645 134.214,39.367 123.707,10.139 84.523,8.767 53.041,7.659 39.9,28.251 36.071,46.739 l -0.928,-0.126 c -1.932,0 -3.438,1.28 -5.34,2.889 -2.084,1.784 -4.683,3.979 -7.792,4.308 C 18.438,54.171 13.9,52.604 10.313,51.361 6.12,49.93 3.689,49.314 2.048,50.602 0.545,51.765 -0.13,53.864 0.02,56.828 c 0.331,6.326 4.971,18.917 16.016,25.778 7.67,4.765 16.248,5.482 20.681,5.482 0.006,0 0.006,0 0.006,0 2.37,0 4.945,-0.239 7.388,-0.726 2.741,4.218 5.228,7.476 6.037,9.752 2.054,5.851 -27.848,25.087 -27.848,55.01 0,29.916 22.013,48.475 56.727,48.475 h 55.004 c 30.593,0 70.814,-29.908 75.291,-92.48 -28.541,24.072 -42.294,-9.969 -103.75,-6.308 z M 18.941,77.945 C 8.775,71.617 4.992,58.922 5.294,55.525 c 0.897,0.24 2.194,0.689 3.228,1.042 4.105,1.415 9.416,3.228 14.068,2.707 4.799,-0.499 8.253,-3.437 10.778,-5.574 0.607,-0.509 1.393,-1.176 1.872,-1.491 0.87,0.315 0.962,0.693 1.176,3.14 0.196,2.26 0.473,5.37 2.362,9.006 1.437,2.761 3.581,5.705 5.646,8.542 1.701,2.336 4.278,5.871 4.535,6.404 -0.445,1.184 -4.907,3.282 -12.229,3.282 -6.553,0.008 -13.04,-1.679 -17.789,-4.638 z M 56.86,49.368 c 0,-4.938 4.001,-8.943 8.931,-8.943 4.941,0 8.942,4.005 8.942,8.943 0,4.931 -4.001,8.942 -8.942,8.942 -4.937,10e-4 -8.931,-4.011 -8.931,-8.942 z m 92.299,106.03 -20.63,11.169 13.408,9.293 c 0,0 -49.854,15.813 -72.198,-6.885 -11.006,-11.16 -13.06,-28.533 4.124,-38.84 17.184,-10.312 84.609,3.943 84.609,3.943 L 134.295,147.8 Z"
              id="path248"
            />
          </g>
        </svg>
      </button>
      <button
        type="button"
        title="start"
        class="btn btn-danger"
        (click)="stopReading()"
        *ngIf="reading"
      >
        <svg
          width="40"
          height="40"
          fill="currentColor"
          class="bi bi-camera"
          viewBox="0 0 16 12"
          version="1.1"
          id="svg6"
          sodipodi:docname="camera.svg"
          inkscape:version="1.2.1 (9c6d41e410, 2022-07-14)"
          xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
          xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:svg="http://www.w3.org/2000/svg"
        >
          <defs id="defs10" />
          <path
            d="m 15,12 a 1,1 0 0 1 -1,1 H 2 A 1,1 0 0 1 1,12 V 6 A 1,1 0 0 1 2,5 H 3.172 A 3,3 0 0 0 5.292,4.121 L 6.122,3.293 A 1,1 0 0 1 6.827,3 h 2.344 a 1,1 0 0 1 0.707,0.293 l 0.828,0.828 A 3,3 0 0 0 12.828,5 H 14 a 1,1 0 0 1 1,1 z M 2,4 A 2,2 0 0 0 0,6 v 6 a 2,2 0 0 0 2,2 h 12 a 2,2 0 0 0 2,-2 V 6 A 2,2 0 0 0 14,4 H 12.828 A 2,2 0 0 1 11.414,3.414 L 10.586,2.586 A 2,2 0 0 0 9.172,2 H 6.828 A 2,2 0 0 0 5.414,2.586 L 4.586,3.414 A 2,2 0 0 1 3.172,4 Z"
            id="path2"
            transform="translate(0,-2)"
          />
          <path
            d="m 8,11 a 2.5,2.5 0 1 1 0,-5 2.5,2.5 0 0 1 0,5 z m 0,1 A 3.5,3.5 0 1 0 8,5 3.5,3.5 0 0 0 8,12 Z M 3,6.5 a 0.5,0.5 0 1 1 -1,0 0.5,0.5 0 0 1 1,0 z"
            id="path4"
            transform="translate(0,-2)"
          />
          <g
            id="g250"
            transform="matrix(0.02112598,0,0,0.02108592,5.9292593,4.2693085)"
          >
            <path
              d="M 105.572,101.811 C 115.461,95.443 132.989,85.347 133.678,59.645 134.214,39.367 123.707,10.139 84.523,8.767 53.041,7.659 39.9,28.251 36.071,46.739 l -0.928,-0.126 c -1.932,0 -3.438,1.28 -5.34,2.889 -2.084,1.784 -4.683,3.979 -7.792,4.308 C 18.438,54.171 13.9,52.604 10.313,51.361 6.12,49.93 3.689,49.314 2.048,50.602 0.545,51.765 -0.13,53.864 0.02,56.828 c 0.331,6.326 4.971,18.917 16.016,25.778 7.67,4.765 16.248,5.482 20.681,5.482 0.006,0 0.006,0 0.006,0 2.37,0 4.945,-0.239 7.388,-0.726 2.741,4.218 5.228,7.476 6.037,9.752 2.054,5.851 -27.848,25.087 -27.848,55.01 0,29.916 22.013,48.475 56.727,48.475 h 55.004 c 30.593,0 70.814,-29.908 75.291,-92.48 -28.541,24.072 -42.294,-9.969 -103.75,-6.308 z M 18.941,77.945 C 8.775,71.617 4.992,58.922 5.294,55.525 c 0.897,0.24 2.194,0.689 3.228,1.042 4.105,1.415 9.416,3.228 14.068,2.707 4.799,-0.499 8.253,-3.437 10.778,-5.574 0.607,-0.509 1.393,-1.176 1.872,-1.491 0.87,0.315 0.962,0.693 1.176,3.14 0.196,2.26 0.473,5.37 2.362,9.006 1.437,2.761 3.581,5.705 5.646,8.542 1.701,2.336 4.278,5.871 4.535,6.404 -0.445,1.184 -4.907,3.282 -12.229,3.282 -6.553,0.008 -13.04,-1.679 -17.789,-4.638 z M 56.86,49.368 c 0,-4.938 4.001,-8.943 8.931,-8.943 4.941,0 8.942,4.005 8.942,8.943 0,4.931 -4.001,8.942 -8.942,8.942 -4.937,10e-4 -8.931,-4.011 -8.931,-8.942 z m 92.299,106.03 -20.63,11.169 13.408,9.293 c 0,0 -49.854,15.813 -72.198,-6.885 -11.006,-11.16 -13.06,-28.533 4.124,-38.84 17.184,-10.312 84.609,3.943 84.609,3.943 L 134.295,147.8 Z"
              id="path248"
            />
          </g>
        </svg>
      </button>
    </div>
  </div>

  <div
    class="row d-flex justify-content-center px-2 px-md-0 position-absolute top-50 start-50 translate-middle"
  >
    <div *ngIf="cameraReady" class="col col-md-6">
      <div class="card text-center">
        <div class="card-header">Precisamos do seu OK! üì∏</div>
        <div class="card-body">
          <h5 class="card-title">Oi! Bem-vindo ao Duck Go!</h5>
          <p class="card-text">
            Para tornar sua experi√™ncia em Pato Branco ainda mais divertida e
            interativa, adorar√≠amos acessar sua c√¢mera. Isso permitir√° que voc√™
            jogue e interaja em tempo real conosco! Mas n√£o se preocupe,
            respeitamos sua privacidade.
          </p>
        </div>
        <div class="card-footer text-body-secondary">
          <div class="row">
            <div class="col-6">
              <button
                [disabled]="buttonDisabler"
                class="btn btn-success w-100 h-100 accessButton"
                (click)="getCamera()"
              >
                Autorizar
              </button>
            </div>
            <div class="col-6">
              <button
                [disabled]="buttonDisabler"
                class="btn btn-danger w-100 h-100 text-wrap accessButton"
                (click)="dontGetCamera()"
              >
                N√£o Autorizar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="geoReady" class="col col-md-6">
      <div class="card text-center">
        <div class="card-header">Permiss√£o de Localiza√ß√£o</div>
        <div class="card-body">
          <h5 class="card-title">Quase l√°, aventureiro Duck Go!</h5>
          <p class="card-text">
            Parece que voc√™ escaneou um QRCode para ganhar pontos. Legal! Para
            adicion√°-los √† sua conta, precisamos confirmar sua localiza√ß√£o. Isso
            garante que tudo seja justo e leg√≠timo em nossa jornada juntos em
            Pato Branco. üåç
          </p>
        </div>
        <div class="card-footer text-body-secondary">
          <div class="row">
            <div class="col-6">
              <button
                [disabled]="buttonDisabler"
                class="btn btn-success w-100 h-100 accessButton"
                (click)="getGeolocationPermission()"
              >
                Autorizar
              </button>
            </div>
            <div class="col-6">
              <button
                [disabled]="buttonDisabler"
                class="btn btn-danger w-100 h-100 text-wrap accessButton"
                (click)="deniedGeolocation()"
              >
                N√£o Autorizar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="promptRegister" class="card text-center">
      <div class="card-header">Cadastro Necess√°rio</div>
      <div class="card-body">
        <h5 class="card-title">Ei, aventureiro Duck Go!</h5>
        <p class="card-text">
          Notamos que voc√™ est√° ansioso para come√ßar sua aventura e usar a
          c√¢mera. Que empolga√ß√£o! No entanto, para garantir uma experi√™ncia
          completa e personalizada em Pato Branco, precisamos que voc√™ esteja
          devidamente cadastrado em nosso site. Assim, suas descobertas e pontos
          estar√£o sempre salvos. ü¶Ü
        </p>
      </div>
      <div class="card-footer text-body-secondary">
        <div class="row">
          <div class="col">
            <button
              [disabled]="buttonDisabler"
              class="btn btn-primary w-100 h-100 accessButton"
              (click)="redirectToRegister()"
            >
              Cadastrar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="permissionDenied" class="container px-3 my-5">
    <div class="card">
      <div class="card-header text-center bg-warning">
        <h4 class="text-white">Ops! Parece que algo n√£o deu certo...</h4>
      </div>
      <div class="card-body">
        <p class="text-center">
          Entendemos sua preocupa√ß√£o com a privacidade e respeitamos sua
          decis√£o. No entanto, sem o acesso √† c√¢mera ou √† localiza√ß√£o, voc√™ n√£o
          poder√° desfrutar de todas as incr√≠veis funcionalidades do Duck Go.
        </p>
        <p>
          Nossa promessa √© que utilizamos estas permiss√µes exclusivamente para
          proporcionar uma aventura completa em nossa plataforma web e garantir
          que voc√™ tenha a melhor experi√™ncia conosco em Pato Branco.
        </p>

        <h5 class="mt-4">Como habilitar as permiss√µes:</h5>

        <div class="mt-3">
          <h6><strong>Desktop ou Laptop:</strong></h6>
          <ol>
            <li>
              Clique no √≠cone de cadeado üîí √† esquerda da barra de endere√ßos do
              seu navegador.
            </li>
            <li>
              Ajuste as permiss√µes para o Duck Go, permitindo acesso √† c√¢mera e
              √† localiza√ß√£o.
            </li>
            <li>Atualize a p√°gina e tente ler o c√≥digo QR mais uma vez.</li>
          </ol>
        </div>

        <div class="mt-3">
          <h6><strong>Android:</strong></h6>
          <ol>
            <li>Abra as "Configura√ß√µes" do seu dispositivo.</li>
            <li>
              V√° at√© "Aplicativos" e encontre o navegador que voc√™ est√° usando.
            </li>
            <li>Toque em "Permiss√µes" e habilite a c√¢mera e a localiza√ß√£o.</li>
            <li>Volte ao Duck Go e tente ler o c√≥digo QR novamente.</li>
          </ol>
        </div>

        <div class="mt-3">
          <h6><strong>iOS (iPhone ou iPad):</strong></h6>
          <ol>
            <li>
              Acesse as "Configura√ß√µes" e des√ßa at√© encontrar o nome do
              navegador que voc√™ est√° usando (por exemplo, Safari).
            </li>
            <li>
              Toque nele e depois em "Permiss√µes" ou "Configura√ß√µes de sites".
            </li>
            <li>Habilite as permiss√µes para c√¢mera e localiza√ß√£o.</li>
            <li>Retorne ao Duck Go e tente ler o c√≥digo QR mais uma vez.</li>
          </ol>
        </div>
      </div>
      <div class="card-footer text-center">
        Esperamos que voc√™ reconsidere e embarque conosco nessa jornada! ü¶Üüåç
      </div>
    </div>
  </div>
</div>

<div *ngIf="apiPoints.getPointSuccess">
  <div class="container">
    <div class="container p-2">
      <div class="card">
        <div class="container d-flex justify-content-center">
          <img
            src="{{ apiPoints.locationPhoto }}"
            alt="Foto do local"
            class="card-img-top"
            style="width: 150px; height: 150px"
          />
        </div>

        <div class="card-body">
          <h2 class="card-title">{{ apiPoints.locationName }}</h2>
          <p class="card-text">{{ apiPoints.locationDescription }}</p>
          <div class="alert alert-success mt-2">
            Parab√©ns! Voc√™ ganhou
            <strong>{{ apiPoints.locationPoints }} pontos</strong> por visitar
            este local.
          </div>
          <p class="mt-1">
            N√£o pare por aqui! Continue explorando e jogando para acumular ainda
            mais pontos. Cada nova aventura traz novas recompensas. Vamos nessa!
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
